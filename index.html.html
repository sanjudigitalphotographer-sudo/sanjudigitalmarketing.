<!--
Lucky Code Website (Single-file)

Features (English):
- SANJU DIGITAL MARKETING landing page.
- Admin can add up to 5 lucky codes (winner positions shown as 1st, 2nd...).
- Admin-only image upload (images saved in browser localStorage as data-URLs) with caption per image.
- Uploaded images are displayed in an auto-sliding carousel visible to all visitors. Only Admin can add/remove images.
- Match shows green + confetti + pop sound; non-match shows red + sad emoji.

Security note: This demo stores images and codes in the browser (localStorage). For production or multi-user admin access, use a backend or Firebase.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SANJU DIGITAL MARKETING</title>
  <style>
    :root{--accent:#0b74de;--bg:#f7f8fb}
    body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);margin:0;padding:20px;color:#111}
    .container{max-width:920px;margin:20px auto;background:#fff;border-radius:12px;padding:18px;box-shadow:0 6px 22px rgba(0,0,0,.08)}
    h1{margin:0 0 12px;font-size:22px}
    p.lead{color:#444}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .card{flex:1;min-width:280px;padding:14px;border-radius:10px;border:1px solid #eee;background:#fafafa}
    input[type=text], input[type=file], textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;font-size:15px}
    button{background:var(--accent);color:#fff;border:0;padding:10px 12px;border-radius:10px;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;color:var(--accent);border:1px solid var(--accent)}
    .msg{margin-top:10px;padding:12px;border-radius:8px;display:flex;align-items:center;gap:10px}
    .success{background:#e9f8ee;color:#0a7b3c}
    .fail{background:#fff0f1;color:#b81d2a}
    .muted{color:#666;font-size:13px}
    .top-right{position:fixed;right:18px;top:18px}
    .admin-panel{margin-top:12px;border-top:1px dashed #ddd;padding-top:12px}
    .small{font-size:13px}
    .code-list{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .code-pill{padding:8px 10px;background:#fff;border:1px solid #eee;border-radius:8px;font-weight:600}
    .btn-sm{padding:6px 8px;border-radius:8px;font-size:13px}
    #confettiCanvas{position:fixed;left:0;top:0;pointer-events:none;z-index:9999}
    .carousel{position:relative;overflow:hidden;border-radius:10px;background:#000;color:#fff;height:260px}
    .carousel img{width:100%;height:260px;object-fit:cover;display:block}
    .carousel .caption{position:absolute;left:12px;bottom:12px;background:rgba(0,0,0,0.5);padding:8px 10px;border-radius:8px}
    .carousel .controls{position:absolute;right:12px;top:12px;display:flex;gap:8px}
    .thumbs{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
    .thumb{width:80px;height:56px;object-fit:cover;border-radius:6px;border:2px solid #fff}
  </style>
</head>
<body>
  <canvas id="confettiCanvas"></canvas>
  <div class="top-right"><button id="adminBtn" class="ghost btn-sm">Admin</button></div>
  <div class="container">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px">
      <img id="siteLogo" src="" alt="logo" style="height:56px;display:none;border-radius:6px;object-fit:contain">
      <h1 style="margin:0">SANJU DIGITAL MARKETING</h1>
    </div>
    <div class="row">
      <div class="card">
        <h3>Check Code</h3>
        <input id="codeInput" type="text" placeholder="Enter your code">
        <div style="margin-top:10px"><button id="checkBtn">Check</button></div>
        <div id="result" class="msg" style="display:none"></div>
        <p class="muted small">Examples: ABC123, LUCKY2025</p>
      </div>
    </div>

    <!-- Carousel placed below the main controls so it is always visible -->
    <div style="margin-top:14px">
      <div class="card">
        <div id="carouselSection" style="display:none; margin-top:20px;"><div id="carousel" class="carousel">
          <img id="carouselImg" src="" alt="slideshow">
          <div id="noImages" style="position:absolute;left:12px;bottom:12px;background:rgba(0,0,0,0.5);padding:8px 10px;border-radius:8px;color:#fff;display:block">No images yet</div>
          <div class="caption" id="carouselCaption" style="display:none"></div>
        </div>
        <div class="thumbs" id="thumbsContainer" style="margin-top:8px"></div>
      </div>
    </div>

    <div id="adminPanel" class="admin-panel" style="display:none">
      <h3>Admin Panel</h3>
      <div style="margin-bottom:8px">
        <label class="small muted">Upload site logo (visible at top only):</label>
        <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
          <input id="logoFileInput" type="file" accept="image/*">
          <button id="uploadLogoBtn" class="btn-sm">Upload Logo</button>
          <button id="clearLogoBtn" class="ghost btn-sm">Remove Logo</button>
        </div>
      </div>
      <p class="small muted">More winners selected. Add, remove codes and manage slideshow images (admin-only).</p>
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:8px">
        <input id="setCodeInput" type="text" placeholder="Enter lucky code to add">
        <button id="addCodeBtn" class="btn-sm">Add Code</button>
        <button id="clearAllBtn" class="ghost btn-sm">Clear Codes</button>
      </div>
      <div class="code-list" id="codesContainer"></div>

      <hr>
      <h4>Upload Images (Admin only)</h4>
      <p class="muted small">You can upload images (jpg/png). Each image can have a caption. Max 10 images stored locally.</p>
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:8px">
        <input id="imageFileInput" type="file" accept="image/*">
        <input id="imageCaptionInput" type="text" placeholder="Caption for image">
        <button id="uploadImageBtn" class="btn-sm">Upload</button>
        <button id="clearImagesBtn" class="ghost btn-sm">Clear Images</button>
      </div>
      <div id="imagesList" class="thumbs"></div>
    </div>

    <hr>
    
  </div>

<script>
// ========== CONFIG ==========
const DEFAULT_ADMIN_PASSWORD = 'BC62D2EBC525K';
let firebaseConfig = undefined; // paste config object here to enable cloud sync (optional)

// ========== UTIL & STORAGE ==========
const $ = id => document.getElementById(id);
const CODES_KEY = 'lucky_codes_v1';
const IMAGES_KEY = 'lucky_images_v1';
const MAX_CODES = 5;
const MAX_IMAGES = 10;
const isCloud = typeof firebaseConfig !== 'undefined' && firebaseConfig !== null;
$('modeLabel')?.textContent && ($('modeLabel').textContent = isCloud ? 'Cloud (Firebase) mode' : 'Local (no cloud)');

const StorageLayer = (() => {
  // For demo we use localStorage for both codes and images. Cloud optional not fully implemented here.
  return {
    getCodes: async () => { const raw = localStorage.getItem(CODES_KEY); return raw? JSON.parse(raw): []; },
    setCodes: async (arr) => { localStorage.setItem(CODES_KEY, JSON.stringify(arr)); },
    clearCodes: async () => { localStorage.removeItem(CODES_KEY); },
    getImages: async () => { const raw = localStorage.getItem(IMAGES_KEY); return raw? JSON.parse(raw): []; },
    setImages: async (arr) => { localStorage.setItem(IMAGES_KEY, JSON.stringify(arr)); },
    clearImages: async () => { localStorage.removeItem(IMAGES_KEY); }
  }
})();

// ordinal helper
function ordinal(n){ if(!n || isNaN(n)) return n; const j = n % 10, k = n % 100; if(j == 1 && k != 11) return n + 'st'; if(j == 2 && k != 12) return n + 'nd'; if(j == 3 && k != 13) return n + 'rd'; return n + 'th'; }

// ========== UI: Codes ==========
function renderCodes(codes){ const c = $('codesContainer'); c.innerHTML=''; if(!codes || codes.length===0){ c.textContent='(none)'; return };
  codes.forEach((code, idx) => {
    const pill = document.createElement('div'); pill.className='code-pill'; pill.textContent=(idx+1)+'. '+code + ' ';
    const del = document.createElement('button'); del.className='ghost btn-sm'; del.textContent='Remove'; del.style.marginLeft='8px'; del.addEventListener('click', async ()=>{ const arr = await StorageLayer.getCodes(); arr.splice(idx,1); await StorageLayer.setCodes(arr); renderCodes(arr); });
    pill.appendChild(del); c.appendChild(pill);
  });
}

$('addCodeBtn').addEventListener('click', async ()=>{
  const code = $('setCodeInput').value.trim(); if(!code){ alert('Enter code'); return }
  const arr = await StorageLayer.getCodes(); if(arr.length>=MAX_CODES){ alert('Max '+MAX_CODES+' codes allowed'); return }
  if(arr.includes(code)){ alert('Code already added'); return }
  arr.push(code); await StorageLayer.setCodes(arr); renderCodes(arr); $('setCodeInput').value=''; alert('Added');
});
$('clearAllBtn').addEventListener('click', async ()=>{ if(!confirm('Clear all saved codes?')) return; await StorageLayer.clearCodes(); renderCodes([]); alert('Cleared'); });

// ========== UI: Images (Admin upload) ==========
async function renderImagesList(){ const arr = await StorageLayer.getImages(); const container = $('imagesList'); container.innerHTML=''; if(!arr || arr.length===0){ container.textContent='(no images)'; renderCarousel([]); return }
  arr.forEach((it, idx) => {
    const img = document.createElement('img'); img.src = it.data; img.className = 'thumb'; img.title = it.caption || '';
    const del = document.createElement('button'); del.className='ghost btn-sm'; del.textContent='Remove'; del.addEventListener('click', async ()=>{ const a = await StorageLayer.getImages(); a.splice(idx,1); await StorageLayer.setImages(a); renderImagesList(); });
    const wrapper = document.createElement('div'); wrapper.style.display='flex'; wrapper.style.flexDirection='column'; wrapper.style.alignItems='center'; wrapper.appendChild(img); wrapper.appendChild(del);
    container.appendChild(wrapper);
  });
  renderCarousel(arr);
  // hide/show carousel section
  const sec = document.getElementById('carouselSection');
  if(!arr || arr.length===0){ sec.style.display='none'; } else { sec.style.display='block'; }

}

$('uploadImageBtn').addEventListener('click', async ()=>{
  const fileInput = $('imageFileInput'); const caption = $('imageCaptionInput').value.trim(); if(!fileInput.files || fileInput.files.length===0){ alert('Select an image'); return }
  const file = fileInput.files[0]; if(!file.type.startsWith('image/')){ alert('Please upload an image file'); return }
  const arr = await StorageLayer.getImages(); if(arr.length>=MAX_IMAGES){ alert('Max '+MAX_IMAGES+' images allowed'); return }
  const reader = new FileReader(); reader.onload = async (e) => {
    arr.push({data: e.target.result, caption: caption}); await StorageLayer.setImages(arr); $('imageCaptionInput').value=''; fileInput.value=''; renderImagesList(); alert('Image uploaded');
  };
  reader.readAsDataURL(file);
});

$('clearImagesBtn').addEventListener('click', async ()=>{ if(!confirm('Clear all images?')) return; await StorageLayer.clearImages(); renderImagesList(); alert('Cleared images'); });

// ========== Carousel (auto-slide) ==========
let carouselArr = []; let currentIndex = 0; let carouselTimer = null;
function renderCarousel(arr){
  carouselArr = arr || [];
  const imgEl = $('carouselImg');
  const capEl = $('carouselCaption');
  const noImgEl = $('noImages');
  const thumbs = $('thumbsContainer');
  thumbs.innerHTML='';
  if(!carouselArr || carouselArr.length===0){
    // show placeholder box when no images
    imgEl.src = '';
    imgEl.style.background = 'linear-gradient(90deg,#ddd,#bbb)';
    imgEl.style.display = 'block';
    imgEl.alt = 'No images';
    capEl.style.display = 'none';
    noImgEl.style.display = 'block';
    return;
  }
  // images exist
  noImgEl.style.display = 'none';
  imgEl.style.background = '';
  currentIndex = currentIndex % carouselArr.length;
  imgEl.src = carouselArr[currentIndex].data;
  capEl.textContent = carouselArr[currentIndex].caption || '';
  capEl.style.display = carouselArr[currentIndex].caption ? 'block' : 'none';
  // thumbs
  carouselArr.forEach((it, idx)=>{
    const t = document.createElement('img'); t.src = it.data; t.className='thumb'; t.addEventListener('click', ()=>{ showSlide(idx); }); thumbs.appendChild(t);
  });
  // start auto
  if(carouselTimer) clearInterval(carouselTimer);
  carouselTimer = setInterval(()=>{ nextSlide(); }, 3000);
}
function showSlide(i){ if(!carouselArr || carouselArr.length===0) return; currentIndex = (i+carouselArr.length)%carouselArr.length; const imgEl = $('carouselImg'); const capEl = $('carouselCaption'); imgEl.src = carouselArr[currentIndex].data; capEl.textContent = carouselArr[currentIndex].caption || ''; capEl.style.display = carouselArr[currentIndex].caption ? 'block' : 'none'; }
function nextSlide(){ if(!carouselArr || carouselArr.length===0) return; showSlide((currentIndex+1)%carouselArr.length); }
function prevSlide(){ if(!carouselArr || carouselArr.length===0) return; showSlide((currentIndex-1+carouselArr.length)%carouselArr.length); }


// ========== UI: Check Code ==========
function showResult(text, ok){ const el = $('result'); el.style.display='flex'; el.textContent=''; el.className='msg '+(ok? 'success':'fail'); if(ok){ const t=document.createElement('span'); t.textContent=text; el.appendChild(t); const emoji=document.createElement('span'); emoji.textContent=' ðŸŽ‰'; emoji.style.fontSize='20px'; el.appendChild(emoji); fireConfetti(); playPopSound(); } else { const t=document.createElement('span'); t.textContent=text; el.appendChild(t); const emoji=document.createElement('span'); emoji.textContent=' â˜¹ï¸'; emoji.style.fontSize='20px'; el.appendChild(emoji); }
}

$('checkBtn').addEventListener('click', async ()=>{
  const code = $('codeInput').value.trim(); if(!code){ showResult('Please enter a code.', false); return }
  const codes = await StorageLayer.getCodes(); if(codes && codes.length>0){ const idx = codes.indexOf(code); if(idx !== -1){ const place = ordinal(idx+1); showResult('Congratulations â€” You are the ' + place + ' winner!', true); return } }
  showResult('Better luck next time.', false);
});

// ========== Admin login & init ==========
$('adminBtn').addEventListener('click', async ()=>{
  const pwd = prompt('Admin Password:'); if(pwd === DEFAULT_ADMIN_PASSWORD){ $('adminPanel').style.display='block'; await refreshAll(); } else { alert('Password mismatch'); }
});

async function refreshAll(){ const codes = await StorageLayer.getCodes(); renderCodes(codes); await renderImagesList(); await loadLogo(); }

// ========== Logo upload & display ==========
async function loadLogo(){ const raw = localStorage.getItem('site_logo_v1'); if(raw){ const img = document.getElementById('siteLogo'); img.src = raw; img.style.display = 'block'; } else { const img = document.getElementById('siteLogo'); img.style.display = 'none'; img.src = ''; } }

$('uploadLogoBtn').addEventListener('click', async ()=>{
  const fileInput = $('logoFileInput'); if(!fileInput.files || fileInput.files.length===0){ alert('Select a logo image'); return }
  const file = fileInput.files[0]; if(!file.type.startsWith('image/')){ alert('Please upload an image file'); return }
  const reader = new FileReader(); reader.onload = async (e) => { localStorage.setItem('site_logo_v1', e.target.result); await loadLogo(); fileInput.value=''; alert('Logo uploaded'); };
  reader.readAsDataURL(file);
});

$('clearLogoBtn').addEventListener('click', async ()=>{ if(!confirm('Remove site logo?')) return; localStorage.removeItem('site_logo_v1'); await loadLogo(); alert('Logo removed'); });

// initial load
refreshAll();

// initial
refreshAll();

// ========== Confetti (simple) ==========
const canvas = document.getElementById('confettiCanvas'); const ctx = canvas.getContext('2d'); let W=window.innerWidth, H=window.innerHeight; canvas.width=W; canvas.height=H; window.addEventListener('resize', ()=>{ W=window.innerWidth; H=window.innerHeight; canvas.width=W; canvas.height=H; });
let confettiPieces = [];
function random(min,max){ return Math.random()*(max-min)+min }
function createConfetti(){ for(let i=0;i<80;i++){ confettiPieces.push({x:random(0,W),y:random(-H,0),r:random(4,9),d:random(10,50),color:['#f94144','#f3722c','#f9c74f','#90be6d','#577590'][Math.floor(random(0,5))],tilt:random(-10,10)}); } }
function drawConfetti(){ ctx.clearRect(0,0,W,H); confettiPieces.forEach(p=>{ ctx.fillStyle=p.color; ctx.beginPath(); ctx.ellipse(p.x,p.y,p.r,p.r/1.5,p.tilt,0,Math.PI*2); ctx.fill(); p.y += Math.cos(p.d) + 1 + p.r/2; p.x += Math.sin(p.d); p.tilt += 0.1; if(p.y>H+20){ p.y = random(-H,0); p.x = random(0,W); } }); }
let confettiInterval = null;
function fireConfetti(){ if(confettiInterval) clearInterval(confettiInterval); confettiPieces = []; createConfetti(); let count=0; confettiInterval = setInterval(()=>{ drawConfetti(); count++; if(count>150){ clearInterval(confettiInterval); ctx.clearRect(0,0,W,H); } }, 16); }

// ========== Pop sound ==========
function playPopSound(){ try{ const ctxA = new (window.AudioContext || window.webkitAudioContext)(); const o = ctxA.createOscillator(); const g = ctxA.createGain(); o.type='triangle'; o.frequency.setValueAtTime(880, ctxA.currentTime); g.gain.setValueAtTime(0.001, ctxA.currentTime); o.connect(g); g.connect(ctxA.destination); o.start(); g.gain.exponentialRampToValueAtTime(0.5, ctxA.currentTime + 0.01); g.gain.exponentialRampToValueAtTime(0.001, ctxA.currentTime + 0.25); o.stop(ctxA.currentTime + 0.3); }catch(e){ /* ignore */ }
}

</script>
</body>
</html>
